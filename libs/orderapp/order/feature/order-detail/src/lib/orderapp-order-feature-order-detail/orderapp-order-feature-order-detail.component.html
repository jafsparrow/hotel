<div
  *ngIf="selectOrderDetailsLoadSpinner$ | async"
  class="h-screen flex items-center justify-center"
>
  Loading....
</div>

<!-- <ng-template #orderDetail> hello world</ng-template> -->
<div
  class="bg-gray-100 p-2 w-full"
  *ngIf="
    selectOrderDetailsOfSelectedOrder$ | async as selectedOrder;
    else noOrderSelected
  "
>
  <div class="rounded-md bg-white p-2">
    <div class="flex w-full flex-row items-stretch">
      <div class="font-bold capitalize">
        Order - {{ selectedOrder.orderNumber }}
      </div>
      <div class="ml-2 border-l-2 pl-2 font-light">
        {{ selectedOrder.createdAt | timesago }}
      </div>
      <div class="flex-grow"></div>
      <div class="font-semibold">
        {{ selectedOrder.totalAmount!.toFixed(3) }} OMR
      </div>
    </div>

    <div class="flex flex-row">
      <div class="flex-grow">
        <div class="font-semibod">
          Type:
          <span class="font-light">{{ selectedOrder.orderType }}</span>
        </div>
        <div class="font-thin">Table 22</div>
        <div class="font-thin">Waiter: {{ selectedOrder.customerName }}</div>
      </div>

      <div *ngIf="selectedOrder.orderStatus === 'served'">
        <div
          class="inline-block h-7 rounded-md bg-purple-900 p-1 my-2 px-2 text-right text-sm text-white cursor-pointer"
          (click)="makePayment(selectedOrder)"
        >
          PAY
        </div>
        <div
          class="inline-block h-7 rounded-md bg-green-700 p-1 px-2 text-right text-sm text-white cursor-pointer"
          (click)="printBill(selectedOrder)"
        >
          PRINT
        </div>
      </div>

      <div
        class="inline-block h-7 rounded-md bg-blue-700 p-1 px-2 text-right text-sm text-white cursor-pointer"
        (click)="makeBillForOrder(selectedOrder)"
        *ngIf="selectedOrder.orderStatus !== 'served'"
      >
        MAKE BILL
      </div>
    </div>

    <div
      class="mt-2 border border-gray-400 p-2 max-w-md max-h-sm overflow-y-auto"
    >
      <div class="grid grid-cols-12 gap-2 py-1">
        <div class="col-span-1 text-xs font-bold">SNO:</div>
        <div class="col-span-6 text-xs font-bold">Item Name:</div>
        <div class="col-span-3 text-xs font-bold">Qty:</div>
        <div class="col-span-2 text-xs font-bold">Tot:</div>
      </div>

      <div *ngFor="let item of selectedOrder.orderItems; let i = index">
        <div class="grid grid-cols-12 gap-2 py-1">
          <div class="col-span-1 text-xs">{{ i + 1 }}</div>
          <div class="col-span-6 text-xs">
            <div>{{ item.name }}</div>
            <div>{{ item.product.secondaryLanguageName }}</div>
          </div>
          <div class="col-span-3 text-xs">{{ item.count }}</div>
          <div class="col-span-2 text-xs">
            {{ (item.amount! * item.count).toFixed(3) }}
          </div>
        </div>
      </div>

      <div class="my-2 h-[1px] w-full bg-gray-600"></div>

      <div class="grid grid-cols-4 pt-2">
        <div class="col-span-2"></div>
        <div class="col-span-1">Bill Total</div>
        <div class="col-span-1">
          {{ selectedOrder.totalAmount!.toFixed(3) }}
        </div>
      </div>

      <div
        class="grid grid-cols-4 pt-2"
        *ngFor="let appliedTax of selectedOrder.appliedTaxes"
      >
        <div class="col-span-2"></div>
        <div class="col-span-1">{{ appliedTax.taxName }}</div>
        <div class="col-span-1">{{ appliedTax.value }}</div>
      </div>

      <div class="grid grid-cols-4 pt-2">
        <div class="col-span-2"></div>
        <div class="col-span-1">Net Total</div>
        <div class="col-span-1">{{ selectedOrder.taxedTotal }}</div>
      </div>
    </div>
  </div>

  <!-- <div class="mt-2 bg-white p-2">
    <div class="flex">
      <div class="w-1/2 p-2">
        <div class="rounded-full border p-2">20</div>
      </div>

      <div class="w-1/2 p-2">
        <div class="rounded-full border p-2">20</div>
      </div>
    </div>

    <div class="p-2">
      <div class="mx-auto w-1/2 rounded-full bg-green-400 p-2 text-center">
        hello world
      </div>
    </div>

    <div class="p-2">
      <div class="mx-auto w-1/2 rounded-full bg-green-400 p-2 text-center">
        hello world
      </div>
    </div>

    <div class="max-w-xs grid grid-cols-3 grid-rows-4 gap-2 mx-auto">
      <div
        class="bg-gray-950 text-white h-full aspect-square flex flex-row justify-center items-center rounded-full text-2xl font-bold"
      >
        1
      </div>
      <div
        class="bg-gray-950 text-white h-full aspect-square flex flex-row justify-center items-center rounded-full text-2xl font-bold"
      >
        1
      </div>
      <div
        class="bg-gray-950 text-white h-full aspect-square flex flex-row justify-center items-center rounded-full text-2xl font-bold"
      >
        1
      </div>
      <div
        class="bg-gray-950 text-white h-full aspect-square flex flex-row justify-center items-center rounded-full text-2xl font-bold"
      >
        1
      </div>
      <div
        class="bg-gray-950 text-white h-full aspect-square flex flex-row justify-center items-center rounded-full text-2xl font-bold"
      >
        1
      </div>
      <div
        class="bg-gray-950 text-white h-full aspect-square flex flex-row justify-center items-center rounded-full text-2xl font-bold"
      >
        1
      </div>
      <div
        class="bg-gray-950 text-white h-full aspect-square flex flex-row justify-center items-center rounded-full text-2xl font-bold"
      >
        1
      </div>
      <div
        class="bg-gray-950 text-white h-full aspect-square flex flex-row justify-center items-center rounded-full text-2xl font-bold"
      >
        1
      </div>
      <div
        class="bg-gray-950 text-white h-full aspect-square flex flex-row justify-center items-center rounded-full text-2xl font-bold"
      >
        1
      </div>
      <div
        class="bg-gray-950 text-white h-full aspect-square flex flex-row justify-center items-center rounded-full text-2xl font-bold"
      >
        1
      </div>
      <div
        class="bg-gray-950 text-white h-full aspect-square flex flex-row justify-center items-center rounded-full text-2xl font-bold"
      >
        1
      </div>
      <div
        class="bg-gray-950 text-white h-full aspect-square flex flex-row justify-center items-center rounded-full text-2xl font-bold"
      >
        1
      </div>
    </div>
  </div> -->
</div>
<ng-template #noOrderSelected>
  No order selected, Please select an order to view
</ng-template>
